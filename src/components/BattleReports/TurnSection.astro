---
import MissionCard from "./MissionCard"
import { Image } from 'astro:assets';

const { indexed_cards, round_number, faction, secondary_missions, content, defender, score } = Astro.props

---
<section class="mt-4">
    <h3 class="text-lg font-bold text-center mb-4" >Turn {round_number + 1} - {faction} </h3>
    <div class="flex flex-wrap gap-8 justify-center mb-4">
        {secondary_missions.map((mission) => (
            <MissionCard mission={indexed_cards[mission].data} defender={defender} />
        ))}
    </div>

    <div class="space-y-2" >
        {content.map((item) => {
            
            if (item.type === 'image') {
                return (
                    <div class="flex flex-col items-center">
                        <Image class="max-w-full md:max-w-[800px] mx-auto" src={item.src} alt={item.alt} />
                        <span class="text-sm text-center mt-2" >{item.alt}</span>
                    </div>
                )
            }

            if (item.type === 'quote') {
                return (
                    <div class="py-2">
                        <blockquote class="border-l-4 border-black pl-2 ml-2 italic" >
                            <p>{item.content}</p>
                            <span class="text-sm font-bold" >{item.source}</span>
                        </blockquote>
                    </div>
                )
            }

            return (
                <p>{item.content}</p>
            )    
        })}
    </div>
    <div class="flex flex-col items-center mt-2" >
        {score.map(scoreItem => {
            return (
                <div><span class="font-bold" >{indexed_cards[scoreItem.source].data.name}</span>: +{scoreItem.value}VPs</div>
            )
        })}
    </div>
</section>


<style>

</style>